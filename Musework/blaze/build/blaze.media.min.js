!function(){Blaze.dna.VideoController=Blaze.View.extend({mixins:["templated","hashBinder","globalEvents","configurable"],className:"video-controller",initialize:function(){this._eventsCalled={play:0,ended:0}},defaultConfig:{nVideoHeight:480,nVideoWidth:853,sTemplate:"Video",sAdaptor:"Video",sVideoPath:"video",sCaptionsPath:"video/captions"},events:{"click .js-next":"next"},render:function(){this.template(this.config.sTemplate,this.getTemplateData(this.config.sAdaptor)),this.player=new MediaElementPlayer(this.$("video"),this.getPlayerSettings())},getPlayerSettings:function(){return{toggleCaptionsButtonWhenOnlyOne:!0,pluginPath:this.config.pluginPath||"shared/vendor/mediaelement/"}},beforeRemove:function(){this.autostart=!1,this.player&&(this.player.isFullScreen&&this.player.exitFullScreen(),this.player.$media.off(),this.player.pause(),this.player.remove(),this.player=null)},next:function(){Blaze.dispatcher.trigger("command:run","next")}}),Blaze.Adaptors.add("Video",function(){var a=this.model.toJSON(),b=this.model.getFormatedNodeId("_");return a.sVideo||(a.sVideo=b),a.sCaptions||(a.sCaptions=b),a})}();