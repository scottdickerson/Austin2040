(function(){var e={};typeof exports!="undefined"?e=exports:typeof define=="function"?define(function(t){return e}):this.Cocktail=e;e.mixins={};e.mixin=function(n){var r=_.chain(arguments).toArray().rest().flatten().value(),i=n.prototype||n,s={};_(r).each(function(t){_.isString(t)&&(t=e.mixins[t]);_(t).each(function(e,t){if(_.isFunction(e)){if(i[t]===e)return;if(i[t]){s[t]=s[t]||[i[t]];s[t].push(e)}i[t]=e}else _.isObject(e)?i[t]=_.extend({},e,i[t]||{}):t in i||(i[t]=e)})});_(s).each(function(e,t){i[t]=function(){var t=this,n=arguments,r;_(e).each(function(e){var i=_.isFunction(e)?e.apply(t,n):e;r=typeof i=="undefined"?r:i});return r}})};var t;e.patch=function(r){t=r.Model.extend;var i=function(n,r){var i=t.call(this,n,r),s=i.prototype.mixins;s&&i.prototype.hasOwnProperty("mixins")&&e.mixin(i,s);return i};_([r.Model,r.Collection,r.Router,r.View]).each(function(t){t.mixin=function(){e.mixin(this,_.toArray(arguments))};t.extend=i})};e.unpatch=function(n){_([n.Model,n.Collection,n.Router,n.View]).each(function(e){e.mixin=undefined;e.extend=t})}})();